<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>staggercast - GoPages</title>

<link type="text/css" rel="stylesheet" href="/go/dns/lib/godoc/style.css">

<script>window.initFuncs = [];</script>
<script src="/go/dns/lib/godoc/jquery.js" defer></script>




<script>var goVersion = "go1.16.15";</script>
<script src="/go/dns/lib/godoc/godocs.js" defer></script>

</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="/go/dns/pkg/github.com/johnstarich/go/dns/">GoPages | Auto-generated docs</a></div>
<div class="top-heading" id="heading-narrow"><a href="/go/dns/pkg/github.com/johnstarich/go/dns/">GoPages</a></div>
<a href="#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package staggercast
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/johnstarich/go/dns/staggercast"</code></dd>
			</dl>
			<dl>
			<dd><a href="#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				<p>
Package staggercast implements a one-to-many net.Conn for easy scattering of the same request to multiple endpoints with control on when new connections are attempted.
For ease of use in a DNS resolver Dial func, all connections implement both net.Conn and net.PacketConn.
</p>

				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
			
			
				
				<dd><a href="#Conn">type Conn</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#New">func New(conns []PacketConn) *Conn</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="#Conn.Close">func (s *Conn) Close() error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Conn.LocalAddr">func (s *Conn) LocalAddr() net.Addr</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Conn.Read">func (s *Conn) Read(b []byte) (n int, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Conn.ReadFrom">func (s *Conn) ReadFrom(b []byte) (n int, addr net.Addr, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Conn.RemoteAddr">func (s *Conn) RemoteAddr() net.Addr</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Conn.SetDeadline">func (s *Conn) SetDeadline(t time.Time) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Conn.SetReadDeadline">func (s *Conn) SetReadDeadline(t time.Time) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Conn.SetWriteDeadline">func (s *Conn) SetWriteDeadline(t time.Time) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Conn.Stagger">func (s *Conn) Stagger(ticker &lt;-chan struct{}, cancel context.CancelFunc)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Conn.Stats">func (s *Conn) Stats() Stats</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Conn.Write">func (s *Conn) Write(b []byte) (n int, err error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#Conn.WriteTo">func (s *Conn) WriteTo(b []byte, addr net.Addr) (n int, err error)</a></dd>
				
			
				
				<dd><a href="#PacketConn">type PacketConn</a></dd>
				
				
			
				
				<dd><a href="#Stats">type Stats</a></dd>
				
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go">conn.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
		
		
			
			
			<h2 id="Conn">type <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L32">Conn</a>
				<a class="permalink" href="#Conn">&#xb6;</a>
				
				
			</h2>
			<p>
Conn is a staggerable packet connection.
Conn fires out all Writes to all outgoing connections, Reads return the first successful read.
</p>

			<pre>type Conn struct {
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="New">func <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L53">New</a>
					<a class="permalink" href="#New">&#xb6;</a>
					
					
				</h3>
				<pre>func New(conns []<a href="#PacketConn">PacketConn</a>) *<a href="#Conn">Conn</a></pre>
				<p>
New combines multiple packet connections (net.Conn or net.PacketConn) and returns a single, staggerable connection
</p>

				
				
			

			
				
				<h3 id="Conn.Close">func (*Conn) <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L319">Close</a>
					<a class="permalink" href="#Conn.Close">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="#Conn">Conn</a>) Close() <a href="/go/dns/pkg/builtin/#error">error</a></pre>
				<p>
Close implements PacketConn
</p>

				
				
				
			
				
				<h3 id="Conn.LocalAddr">func (*Conn) <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L334">LocalAddr</a>
					<a class="permalink" href="#Conn.LocalAddr">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="#Conn">Conn</a>) LocalAddr() <a href="/go/dns/pkg/net/">net</a>.<a href="/go/dns/pkg/net/#Addr">Addr</a></pre>
				<p>
LocalAddr implements PacketConn
</p>

				
				
				
			
				
				<h3 id="Conn.Read">func (*Conn) <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L212">Read</a>
					<a class="permalink" href="#Conn.Read">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="#Conn">Conn</a>) Read(b []<a href="/go/dns/pkg/builtin/#byte">byte</a>) (n <a href="/go/dns/pkg/builtin/#int">int</a>, err <a href="/go/dns/pkg/builtin/#error">error</a>)</pre>
				
				
				
				
			
				
				<h3 id="Conn.ReadFrom">func (*Conn) <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L263">ReadFrom</a>
					<a class="permalink" href="#Conn.ReadFrom">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="#Conn">Conn</a>) ReadFrom(b []<a href="/go/dns/pkg/builtin/#byte">byte</a>) (n <a href="/go/dns/pkg/builtin/#int">int</a>, addr <a href="/go/dns/pkg/net/">net</a>.<a href="/go/dns/pkg/net/#Addr">Addr</a>, err <a href="/go/dns/pkg/builtin/#error">error</a>)</pre>
				<p>
ReadFrom implements net.PacketConn, but is unused for UDP DNS queries. May require further testing for other use cases.
</p>

				
				
				
			
				
				<h3 id="Conn.RemoteAddr">func (*Conn) <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L340">RemoteAddr</a>
					<a class="permalink" href="#Conn.RemoteAddr">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="#Conn">Conn</a>) RemoteAddr() <a href="/go/dns/pkg/net/">net</a>.<a href="/go/dns/pkg/net/#Addr">Addr</a></pre>
				<p>
RemoteAddr implements PacketConn
</p>

				
				
				
			
				
				<h3 id="Conn.SetDeadline">func (*Conn) <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L346">SetDeadline</a>
					<a class="permalink" href="#Conn.SetDeadline">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="#Conn">Conn</a>) SetDeadline(t <a href="/go/dns/pkg/time/">time</a>.<a href="/go/dns/pkg/time/#Time">Time</a>) <a href="/go/dns/pkg/builtin/#error">error</a></pre>
				<p>
SetDeadline implements PacketConn
</p>

				
				
				
			
				
				<h3 id="Conn.SetReadDeadline">func (*Conn) <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L356">SetReadDeadline</a>
					<a class="permalink" href="#Conn.SetReadDeadline">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="#Conn">Conn</a>) SetReadDeadline(t <a href="/go/dns/pkg/time/">time</a>.<a href="/go/dns/pkg/time/#Time">Time</a>) <a href="/go/dns/pkg/builtin/#error">error</a></pre>
				<p>
SetReadDeadline implements PacketConn
</p>

				
				
				
			
				
				<h3 id="Conn.SetWriteDeadline">func (*Conn) <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L366">SetWriteDeadline</a>
					<a class="permalink" href="#Conn.SetWriteDeadline">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="#Conn">Conn</a>) SetWriteDeadline(t <a href="/go/dns/pkg/time/">time</a>.<a href="/go/dns/pkg/time/#Time">Time</a>) <a href="/go/dns/pkg/builtin/#error">error</a></pre>
				<p>
SetWriteDeadline implements PacketConn
</p>

				
				
				
			
				
				<h3 id="Conn.Stagger">func (*Conn) <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L81">Stagger</a>
					<a class="permalink" href="#Conn.Stagger">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="#Conn">Conn</a>) Stagger(ticker &lt;-chan struct{}, cancel <a href="/go/dns/pkg/context/">context</a>.<a href="/go/dns/pkg/context/#CancelFunc">CancelFunc</a>)</pre>
				<p>
Stagger controls when secondary connections are attempted after the first. For any new enabled connection, the last Write and SetDeadlines are replayed onto it.
If Stagger is called after the connection is started, then the behavior is undefined.
First connection is attempted immediately, then all future connections will be enabled when receiving from ticker.
</p>
<p>
Example: Create and wrap a &#39;time.Ticker.C&#39; with a duration of 1 second.
The first connection is attempted immediately. For every 1 second the Read hasn&#39;t returned, an additional connection is attempted.
Once a connection succeeds, the result is returned immediately from Read.
</p>

				
				
				
			
				
				<h3 id="Conn.Stats">func (*Conn) <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L119">Stats</a>
					<a class="permalink" href="#Conn.Stats">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="#Conn">Conn</a>) Stats() <a href="#Stats">Stats</a></pre>
				<p>
Stats returns statistics from a staggercast execution
</p>

				
				
				
			
				
				<h3 id="Conn.Write">func (*Conn) <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L240">Write</a>
					<a class="permalink" href="#Conn.Write">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="#Conn">Conn</a>) Write(b []<a href="/go/dns/pkg/builtin/#byte">byte</a>) (n <a href="/go/dns/pkg/builtin/#int">int</a>, err <a href="/go/dns/pkg/builtin/#error">error</a>)</pre>
				
				
				
				
			
				
				<h3 id="Conn.WriteTo">func (*Conn) <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L295">WriteTo</a>
					<a class="permalink" href="#Conn.WriteTo">&#xb6;</a>
					
					
				</h3>
				<pre>func (s *<a href="#Conn">Conn</a>) WriteTo(b []<a href="/go/dns/pkg/builtin/#byte">byte</a>, addr <a href="/go/dns/pkg/net/">net</a>.<a href="/go/dns/pkg/net/#Addr">Addr</a>) (n <a href="/go/dns/pkg/builtin/#int">int</a>, err <a href="/go/dns/pkg/builtin/#error">error</a>)</pre>
				<p>
WriteTo implements net.PacketConn, but is unused for UDP DNS queries. May require further testing for other use cases.
</p>

				
				
				
			
		
			
			
			<h2 id="PacketConn">type <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L17">PacketConn</a>
				<a class="permalink" href="#PacketConn">&#xb6;</a>
				
				
			</h2>
			<p>
PacketConn implements both net.Conn and net.PacketConn
</p>

			<pre>type PacketConn interface {
    <a href="/go/dns/pkg/io/">io</a>.<a href="/go/dns/pkg/io/#Reader">Reader</a>
    <a href="/go/dns/pkg/io/">io</a>.<a href="/go/dns/pkg/io/#Writer">Writer</a>
    RemoteAddr() <a href="/go/dns/pkg/net/">net</a>.<a href="/go/dns/pkg/net/#Addr">Addr</a>
    <a href="/go/dns/pkg/net/">net</a>.<a href="/go/dns/pkg/net/#PacketConn">PacketConn</a>
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="Stats">type <a href="/go/dns/src/github.com/johnstarich/go/dns/staggercast/conn.go#L25">Stats</a>
				<a class="permalink" href="#Stats">&#xb6;</a>
				
				
			</h2>
			<p>
Stats contains statistics from a staggercast execution
</p>

			<pre>type Stats struct {
<span id="Stats.FastestRemoteIndex"></span>    FastestRemoteIndex <a href="/go/dns/pkg/builtin/#int">int</a>
<span id="Stats.FastestRemote"></span>    FastestRemote      <a href="/go/dns/pkg/net/">net</a>.<a href="/go/dns/pkg/net/#Addr">Addr</a>
}
</pre>

			

			

			
			
			

			

			
		
	

	







<div id="footer">
Build version go1.16.15.<br>
</div>

</div><!-- .container -->
</div><!-- #page -->
</body>
</html>
